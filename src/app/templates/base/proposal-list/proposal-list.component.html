<div class="category_mainwrap job_listingwrap"> 
  <div class="breadcrumb_wrap">
    <div class="container">
      <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <h4>Proposal lists</h4>
        </div><!--end col-->
      </div><!--end row-->
    </div><!--end container-->
  </div><!--end breadcrumb_wrap-->

  <div class="job_listing">
    <div class="container">
      <div class="row">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
          <div class="posting-box">
            <div class="post-head">
              <h3>Proposals</h3>
            </div><!--end post-head-->

            <div class="table-responsive">
            <div class="example-container mat-elevation-z8">
              <mat-table #table [dataSource]="dataSource" matSort matSortDisableClear>

                <!-- Position Column -->
                <ng-container matColumnDef="user">
                  <mat-header-cell *matHeaderCellDef=""> Freelancer </mat-header-cell>
                  <mat-cell *matCellDef="let element"> 
                    <span *ngIf="element.avatar !== null;else elementavatardefault">
                    <img  src="{{image_url}}{{element.avatar}}" class="prposal-list-img">
                  </span> 
                  <ng-template #elementavatardefault>
                      <img  src="assets/images/profile_default.png" class="prposal-list-img">
                  </ng-template>
                  <span >{{element.first_name}} {{element.last_name}}</span> </mat-cell>
                </ng-container>

                <!-- Symbol Column -->
                <ng-container matColumnDef="action">
                  <mat-header-cell *matHeaderCellDef=""> </mat-header-cell>
                  <!-- <mat-cell *matCellDef="let element">
                    
                  </mat-cell> -->
                  <mat-cell *matCellDef="let element"> 
                    <span *ngIf="element.status == 'Cancel' || element.job_status == 'Closed' || (element.offer_status != 'Pending' && element.offer_status != 'Modified by client' && element.offer_status != '');else proposalStatus">
                        <button *ngIf="element.status == 'Cancel'" mat-menu-item="">{{element.status}}ed</button> 
                        <button *ngIf="element.job_status == 'Closed' && element.offer_status == 'Accept'" mat-menu-item="">Completed</button> 
                        <button *ngIf="element.offer_status == 'Accept' && element.job_status != 'Closed'" mat-menu-item="">Accepted</button> 
                        <button *ngIf="element.status != 'Cancel' && element.offer_status != 'Accept' && element.job_status != 'Closed'" mat-menu-item="">{{element.offer_status}}</button> 
                    </span>
                    <ng-template #proposalStatus>
                    <button *ngIf="resource > totalcount && element.offer_status != 'Accept'" mat-button [matMenuTriggerFor]="menu">Actions<span class="fa fa-chevron-down"></span></button>
                    <mat-menu #menu="matMenu">
                        <button *ngIf="element.status != 'Cancel'" mat-menu-item="" [routerLink]="['/proposal-details/' + element.id]" class="proposal_icon"><i class="material-icons">open_in_new</i> View</button>
                        <button mat-menu-item="" [disabled]="!ProposalStatusclicked" (click)="cancelProposal(element)" ><mat-icon>cancel_presentation</mat-icon>Cancel</button>
                    </mat-menu>
                    </ng-template>

                  </mat-cell> 
                </ng-container>
                

                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
              </mat-table>
              <div class="no-results" [style.display]="resultsLength == 0 ? '' : 'none'">
                No Record Found.
              </div>
              <span *ngIf="resultsLength > 10;else Proposalspaginationnotshot">
                <mat-paginator #dataPaginator [length]="resultsLength" [pageSize]="10"></mat-paginator>
              </span>
              <ng-template #Proposalspaginationnotshot>
                <mat-paginator style="display: none;" #dataPaginator [length]="resultsLength" [pageSize]="10"></mat-paginator>
              </ng-template>
              
            </div>
          </div><!--end table-responsive-->
        </div><!--end posting-box-->
      </div><!--end col-->
    </div><!--end row-->
  </div><!--end container-->
</div><!--end job_listing-->
</div><!--end job_listingwrap-->
